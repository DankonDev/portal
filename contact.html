<!-- contact.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dankon Games - Contact Us</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
  <script>
    (function() {
      emailjs.init("hxFtn4ES55vtUJ8D7");
    })();
  </script>
</head>
<body>

  <!-- Navbar -->
  <header class="navbar">
    <div class="logo">Dankon Games</div>
    <nav class="nav-links">
      <a href="index.html" class="nav-link">About Us</a>
      <a href="games.html" class="nav-link">Our Games</a>
      <a href="privacy.html" class="nav-link">Privacy Policy</a>
      <a href="contact.html" class="nav-link active">Contact Us</a>
    </nav>
  </header>

  <!-- Contact Us Section -->
  <section class="contact">
    <h2 class="section-title">Contact Us</h2>
    <form id="contact-form">
      <label>Name:</label>
      <input type="text" name="from_name" required />

      <label>Email:</label>
      <input type="email" name="from_email" required />

      <label>Game:</label>
      <select name="game" required>
        <option value="">-- Select Game --</option>
        <option value="Bouncy Escape">Bouncy Escape</option>
        <option value="Brainrot Quiz">Brainrot Quiz</option>
        <option value="Build Master">Build Master: City Island</option>
        <option value="Idle Candy Clicker">Idle Candy Clicker Tycoon</option>
        <option value="None">Not related to a specific game</option>
      </select>

      <label>Issue Type:</label>
      <select name="issue_type" required>
        <option value="">-- Select Issue --</option>
        <option value="Bug">Bug</option>
        <option value="Payment Issue">Payment Issue</option>
        <option value="Report a Player">Report a Player</option>
        <option value="Account Issue">Account Issue</option>
        <option value="Gameplay Help">Gameplay Help</option>
        <option value="Other">Other</option>
      </select>

      <label>Message:</label>
      <textarea name="message" rows="5" required></textarea>

      <div class="checkbox">
        <input type="checkbox" name="privacy_agreement" required />
        I agree with the <a href="privacy.html">Privacy Policy</a>
      </div>

      <button type="submit">Send message</button>
    </form>
  </section>

  <!-- Pop-up -->
  <div class="success-popup" id="success-popup">Message sent successfully!</div>

  <script>
    const form = document.getElementById('contact-form');
    const popup = document.getElementById('success-popup');

    form.addEventListener('submit', function(e) {
      e.preventDefault();

      const now = new Date().toLocaleString();
      const timeInput = document.createElement('input');
      timeInput.type = 'hidden';
      timeInput.name = 'time';
      timeInput.value = now;
      form.appendChild(timeInput);

      emailjs.sendForm('service_ifr56xd', 'template_te6cs2n', form)
        .then(() => {
          popup.classList.add('show');
          setTimeout(() => popup.classList.remove('show'), 4000);
          form.reset();
        })
        .catch(error => {
          popup.textContent = 'Sending failed. Please try again.';
          popup.classList.add('show');
          setTimeout(() => {
            popup.classList.remove('show');
            popup.textContent = 'Message sent successfully!';
          }, 5000);
          console.error(error);
        });
    });
  </script>

</body>
</html>
